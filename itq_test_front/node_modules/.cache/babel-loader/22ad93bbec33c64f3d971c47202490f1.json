{"ast":null,"code":"var _jsxFileName = \"/home/andrey/my_projects/test_tasks/test_itq-group/itq_test_front_api/src/components/Draw_graphs.jsx\";\nimport React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport cs from './Draw_graphs.module.css';\nimport fconfig from \"../fconfig.json\";\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport ReactEcharts from 'echarts-for-react';\nvar base_url = JSON.stringify(fconfig[\"api\"][\"root\"]).replace(/['\"]+/g, '');\n\nclass DrawGraphs extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isToggleOn: true,\n      isFetching: true,\n      error: null,\n      data: null,\n      start_date: \"2020-01-10\",\n      end_date: \"2020-01-14\",\n      city_name: \"Paris\"\n    };\n    this.onChange = this.onChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.UpdateState = this.UpdateState.bind(this);\n    this.PutState = this.PutState.bind(this);\n    this.getOption = this.getOption.bind(this);\n  } ///////////////////////\n\n\n  PutState(event) {\n    axios.get(base_url + '/RR/api/v1.0/data/upload', {\n      params: {\n        city: this.state.city_name,\n        start_date: this.state.start_date,\n        end_date: this.state.end_date\n      },\n      headers: {\n        // Перечисляем разрешённые методы\n        \"Access-Control-Allow-Methods\": \"GET\"\n      }\n    }).then(response => {\n      if ('error' in response.data) throw new Error(response.data['error']);\n      console.log(response); // выводим в консоль получаемые обьекты\n\n      this.setState({\n        data: response.data\n      });\n    }).catch(e => console.log(e));\n  } ///////////////////////\n\n\n  UpdateState(event) {\n    axios.get(base_url + '/RR/api/v1.0/data/get', {\n      params: {\n        city: this.state.city_name,\n        start_date: this.state.start_date,\n        end_date: this.state.end_date\n      },\n      headers: {\n        // Перечисляем разрешённые методы\n        \"Access-Control-Allow-Methods\": \"GET\"\n      }\n    }).then(response => {\n      if ('error' in response.data) throw new Error(response.data['error']);\n      console.log(response); // выводим в консоль получаемые обьекты\n\n      this.setState({\n        data: response.data\n      });\n    }).catch(e => console.log(e));\n  } /////////////////////////////////////\n\n\n  handleClick(event) {\n    const name = event.target.name;\n    if (name === \"get\") this.UpdateState(event);\n    if (name === \"upload\") this.PutState(event);\n  } //////////////////////////////////////\n\n\n  onChange(e) {\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState({\n      [name]: value\n    });\n  } //////////////////////\n\n\n  componentDidMount(event) {\n    this.UpdateState(event);\n  } /////////////////////\n  //функция рисования графика\n\n\n  getOption() {\n    console.log(this.state.data);\n    let option = {\n      legend: {},\n      tooltip: {},\n      dataset: {\n        // Here the declared `dimensions` is mainly for providing the order of\n        // the dimensions, which enables ECharts to apply the default mapping\n        // from dimensions to axes.\n        // Alternatively, we can declare `series.encode` to specify the mapping,\n        // which will be introduced later.\n        dimensions: ['date', 'temp'],\n        source: [{\n          date: '2019-10-01',\n          temp: '8.7'\n        }]\n      },\n      xAxis: {\n        type: 'time'\n      },\n      yAxis: {},\n      series: [{\n        type: 'line'\n      }]\n    };\n    return option;\n  } ////////////////////\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.page_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.page__form_data_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430:\")), React.createElement(Form.Control, {\n      name: \"start_date\",\n      type: \"date\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043D\\u0435\\u0447\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430:\")), React.createElement(Form.Control, {\n      name: \"end_date\",\n      type: \"date\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430:\")), React.createElement(Form.Control, {\n      name: \"city_name\",\n      type: \"text\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.aligin_bottom,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      name: \"upload\",\n      className: cs.button_upload,\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.aligin_bottom,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      name: \"get\",\n      className: cs.button_upload,\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"))))), React.createElement(\"div\", {\n      className: cs.page__graph_data_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(ReactEcharts, {\n      ref: \"echartsInstance\",\n      option: this.getOption(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default DrawGraphs;","map":{"version":3,"sources":["/home/andrey/my_projects/test_tasks/test_itq-group/itq_test_front_api/src/components/Draw_graphs.jsx"],"names":["React","Form","Button","axios","cs","fconfig","Col","Row","ReactEcharts","base_url","JSON","stringify","replace","DrawGraphs","Component","constructor","props","state","isToggleOn","isFetching","error","data","start_date","end_date","city_name","onChange","bind","handleClick","UpdateState","PutState","getOption","event","get","params","city","headers","then","response","Error","console","log","setState","catch","e","name","target","value","componentDidMount","option","legend","tooltip","dataset","dimensions","source","date","temp","xAxis","type","yAxis","series","render","page_wrapper","page__form_data_wrapper","row_three_item","title_field","aligin_bottom","button_upload","page__graph_data_wrapper"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport cs from './Draw_graphs.module.css';\nimport fconfig from \"../fconfig.json\";\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport ReactEcharts from 'echarts-for-react';\n\nvar base_url = JSON.stringify(fconfig[\"api\"][\"root\"]).replace(/['\"]+/g, '')\n\n\nclass DrawGraphs extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isToggleOn: true,\n      isFetching: true,\n      error: null,\n      data : null,\n      start_date : \"2020-01-10\",\n      end_date : \"2020-01-14\",\n      city_name : \"Paris\"\n    }\n\n    this.onChange = this.onChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.UpdateState = this.UpdateState.bind(this);\n    this.PutState = this.PutState.bind(this);\n    this.getOption = this.getOption.bind(this);\n  }\n\n  ///////////////////////\n  PutState(event) {\n\n    axios.get(base_url+'/RR/api/v1.0/data/upload',{\n      params: {\n        city : this.state.city_name,\n        start_date : this.state.start_date,\n        end_date : this.state.end_date\n      },\n      headers: {\n        // Перечисляем разрешённые методы\n        \"Access-Control-Allow-Methods\": \"GET\"\n      }\n    })\n    .then(\n      (response) => {\n\n        if ('error' in response.data)\n        throw new Error(response.data['error']);\n\n        console.log(response) // выводим в консоль получаемые обьекты\n        this.setState({\n          data: response.data\n        });\n      }\n    )\n    .catch(e => console.log(e));\n\n  }\n\n  ///////////////////////\n  UpdateState(event) {\n\n    axios.get(base_url+'/RR/api/v1.0/data/get',{\n      params: {\n        city : this.state.city_name,\n        start_date : this.state.start_date,\n        end_date : this.state.end_date\n      },\n      headers: {\n        // Перечисляем разрешённые методы\n        \"Access-Control-Allow-Methods\": \"GET\"\n      }\n    })\n    .then(\n      (response) => {\n\n        if ('error' in response.data)\n        throw new Error(response.data['error']);\n\n        console.log(response) // выводим в консоль получаемые обьекты\n        this.setState({\n          data: response.data\n        });\n      }\n    )\n    .catch(e => console.log(e));\n\n  }\n  /////////////////////////////////////\n\n  handleClick(event) {\n    const name = event.target.name;\n\n    if (name === \"get\")\n    this.UpdateState(event)\n\n    if (name === \"upload\")\n    this.PutState(event)\n\n  }\n  //////////////////////////////////////\n  onChange(e) {\n    const name = e.target.name;\n    const value = e.target.value;\n\n    this.setState({\n      [name]: value\n    })\n\n  }\n\n  //////////////////////\n  componentDidMount(event) {\n\n    this.UpdateState(event)\n\n  }\n  /////////////////////\n  //функция рисования графика\n  getOption() {\n\n    console.log(this.state.data)\n    let  option = {\n      legend: {},\n      tooltip: {},\n      dataset: {\n        // Here the declared `dimensions` is mainly for providing the order of\n        // the dimensions, which enables ECharts to apply the default mapping\n        // from dimensions to axes.\n        // Alternatively, we can declare `series.encode` to specify the mapping,\n        // which will be introduced later.\n        dimensions: ['date', 'temp'],\n        source: [ {date:'2019-10-01',temp:'8.7'} ,\n        ]\n      },\n      xAxis: {type: 'time'},\n      yAxis: {},\n      series: [\n        {type: 'line'},\n      ]\n    };\n    return option;\n  }\n  ////////////////////\n\n\n  render() {\n    return (\n      <div>\n        <div className={cs.page_wrapper}>\n          <div className={cs.page__form_data_wrapper}>\n            <Form>\n              <Form.Row>\n\n                <Form.Group  as={Col} controlId=\"formHorizontal1\">\n                  <div className={cs.row_three_item}>\n                    <Form.Label bsPrefix={cs.title_field}><b>Начальная дата:</b></Form.Label>\n                    <Form.Control name=\"start_date\" type=\"date\" required=\"required\"  onChange={this.onChange} />\n                  </div>\n                </Form.Group>\n\n                <Form.Group as={Col} controlId=\"formHorizontal2\">\n                  <div className={cs.row_three_item}>\n                    <Form.Label bsPrefix={cs.title_field}><b>Конечная дата:</b></Form.Label>\n                    <Form.Control name=\"end_date\" type=\"date\" required=\"required\" onChange={this.onChange} />\n                  </div>\n                </Form.Group>\n\n                <Form.Group as={Col} controlId=\"formHorizontal2\">\n                  <div className={cs.row_three_item}>\n                    <Form.Label bsPrefix={cs.title_field}><b>Название города:</b></Form.Label>\n                    <Form.Control name=\"city_name\" type=\"text\" required=\"required\" onChange={this.onChange} />\n                  </div>\n                </Form.Group>\n              </Form.Row>\n\n              <Row>\n                <Col>\n                  <div className={cs.aligin_bottom} >\n                    <Button type=\"submit\" name=\"upload\" className={cs.button_upload}  onClick={this.handleClick}>\n                      Загрузить данные\n                    </Button>\n                  </div>\n                </Col>\n                <Col>\n                  <div className={cs.aligin_bottom} >\n                    <Button type=\"submit\" name=\"get\" className={cs.button_upload}  onClick={this.handleClick}>\n                      Обновить данные\n                    </Button>\n                  </div>\n                </Col>\n              </Row>\n            </Form>\n            <div className={cs.page__graph_data_wrapper}>\n            <ReactEcharts ref='echartsInstance'\n              option={this.getOption()} />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n\n\nexport default DrawGraphs;\n"]},"metadata":{},"sourceType":"module"}