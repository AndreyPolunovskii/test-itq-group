{"ast":null,"code":"var _jsxFileName = \"/home/andrey/my_projects/test_tasks/test_itq-group/itq_test_front/src/components/Draw_graphs.jsx\";\nimport React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport cs from './Draw_graphs.module.css';\nimport fconfig from \"../fconfig.json\";\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport ReactEcharts from 'echarts-for-react';\nvar base_url = JSON.stringify(fconfig[\"api\"][\"root\"]).replace(/['\"]+/g, '');\n\nclass DrawGraphs extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFetching: true,\n      error: null,\n      data1: null,\n      data2: null,\n      start_date1: \"2020-01-13\",\n      end_date1: \"2020-01-14\",\n      city_name1: \"Moscow\",\n      start_date2: \"2020-01-13\",\n      end_date2: \"2020-01-14\",\n      city_name2: \"Paris\",\n      style: {\n        height_graph: \"400px\"\n      }\n    };\n    this.onChange = this.onChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.UpdateState = this.UpdateState.bind(this);\n    this.PutState = this.PutState.bind(this);\n    this.getOption = this.getOption.bind(this);\n  } ///////////////////////\n\n\n  checkData(response) {\n    //если какие то ошибки (надо их выводить на экран)\n    if ('error' in response.data) {\n      let Err = new Error(response.data1['error']);\n      this.setState({\n        error: Err\n      });\n      throw Err;\n    } //если пустой датасет\n\n\n    if (response.data1 != null) if (response.data1['data'].length === 0) {\n      let Err = new Error(\"нет данных\");\n      this.setState({\n        error: Err\n      });\n      throw Err;\n    }\n  } ///////////////////////\n\n\n  PutState(event, type_data) {\n    axios.get(base_url + '/data/upload', {\n      params: {\n        city: this.state.city_name,\n        start_date: this.state.start_date,\n        end_date: this.state.end_date\n      },\n      headers: {\n        // Перечисляем разрешённые методы\n        \"Access-Control-Allow-Methods\": \"GET\"\n      }\n    }).then(response => {\n      this.checkData(response);\n      console.log(response); // выводим в консоль получаемые обьекты\n\n      this.setState({\n        [type_data]: response.data\n      });\n    }).catch(e => {\n      console.log(e);\n      this.setState({\n        error: e\n      });\n      alert(this.state.error.message);\n    });\n  } ///////////////////////\n\n\n  UpdateState(event, type_data) {\n    axios.get(base_url + '/data/get', {\n      params: {\n        city: this.state.city_name,\n        start_date: this.state.start_date,\n        end_date: this.state.end_date\n      },\n      headers: {\n        // Перечисляем разрешённые методы\n        \"Access-Control-Allow-Methods\": \"GET\"\n      }\n    }).then(response => {\n      this.checkData(response);\n      console.log(response); // выводим в консоль получаемые обьекты\n\n      this.setState({\n        [type_data]: response.data\n      });\n    }).catch(e => {\n      console.log(e);\n      this.setState({\n        error: e\n      });\n      alert(this.state.error.message);\n    });\n  } /////////////////////////////////////\n\n\n  handleClick(event) {\n    const name = event.target.name;\n    event.preventDefault();\n\n    if (name === \"get\") {\n      this.UpdateState(event, 'data1');\n      this.UpdateState(event, 'data2');\n    }\n\n    if (name === \"upload\") {\n      this.PutState(event, 'data1');\n      this.PutState(event, 'data2');\n    }\n  } //////////////////////////////////////\n\n\n  onChange(e) {\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState({\n      [name]: value\n    });\n  } //////////////////////\n\n\n  componentDidMount(event) {\n    this.UpdateState(event, 'data1');\n    this.UpdateState(event, 'data2');\n  } /////////////////////\n  //функция рисования графика\n\n\n  getOption(type_data) {\n    var months = [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Май\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Октябрь\", \"Ноябрь\", \"Декабрь\"];\n    let title = \"\",\n        type_unit = \"\";\n\n    if (type_data === \"temp\") {\n      title = \"Температура\";\n      type_unit = \"[C]\";\n    }\n\n    if (type_data === \"pres\") {\n      title = \"Давление\";\n      type_unit = \"[mb]\";\n    }\n\n    if (type_data === \"rh\") {\n      title = \"влажность\";\n      type_unit = \"[%]\";\n    } //ждем пока данные полностью загрузятся и тогда отрисовываем график\n\n\n    if (this.state.data !== null) {\n      let option = {\n        legend: {},\n        elements: {\n          point: {\n            display: true\n          }\n        },\n        title: {\n          text: type_unit\n        },\n        tooltip: {\n          trigger: 'none',\n          axisPointer: {\n            type: 'cross'\n          }\n        },\n        xAxis: {\n          axisTick: {\n            alignWithLabel: true\n          },\n          axisLine: {\n            onZero: false\n          },\n          axisLabel: {\n            formatter: function (value, index) {\n              // Formatted to be month/day; display year only in the first label\n              let myDate = new Date(value);\n              let fullDate = myDate.getDate() + \" \" + months[myDate.getMonth()] + \" \" + myDate.getFullYear() + \" \" + myDate.getHours() + \":\" + myDate.getMinutes() + \":\" + myDate.getSeconds();\n              return fullDate;\n            }\n          },\n          axisPointer: {\n            label: {\n              formatter: function (date) {\n                let myDate = new Date(date.value);\n                let fullDate = myDate.getDate() + \" \" + months[myDate.getMonth()] + \" \" + myDate.getFullYear() + \" \" + myDate.getHours() + \":\" + myDate.getMinutes() + \":\" + myDate.getSeconds();\n                return fullDate;\n              }\n            }\n          },\n          data: this.state.data1['data'].map(item => item.dt)\n        },\n        yAxis: {},\n        series: [{\n          data: this.state.data1['data'].map(function (item) {\n            return item[type_data];\n          }),\n          name: title,\n          type: 'line',\n          smooth: 0.5 //включаем сглаживание\n\n        }, {\n          data: this.state.data2['data'].map(function (item) {\n            return item[type_data];\n          }),\n          name: title,\n          type: 'line',\n          smooth: 0.5 //включаем сглаживание\n\n        }]\n      };\n      return option;\n    } else {\n      let option = {};\n      return option;\n    }\n  } ////////////////////\n\n\n  renderTitle(data) {\n    if (this.state.data1 !== null && this.state.data2 !== null) {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430 - \", this.state.data1['data'][0]['city_name'], \" (\", this.state.data1['data'][0]['country_code'], \") \\u0438 this.state.data2['data'][0]['city_name']} (\", this.state.data2['data'][0]['country_code'], \")\"));\n    } else {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      });\n    }\n  } /////////////////////\n\n\n  render() {\n    let _this$state = this.state,\n        style = _this$state.style,\n        data = _this$state.data;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.page__wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"\".concat(cs.page__title_wrapper, \" \").concat(cs.page__main_title_wrapper),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0433\\u043E\\u0434\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: cs.page__form_data_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: cs.page__title_form_data_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043E\\u0441\\u043D\\u043E\\u0432\\u043D\\u044B\\u0435 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B:\")), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: cs.page__title_form_one_data_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, \"\\u041F\\u0435\\u0440\\u0432\\u044B\\u0439 \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A:\")), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430:\")), React.createElement(Form.Control, {\n      name: \"start_date1\",\n      defaultValue: \"2020-01-13\",\n      type: \"date\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043D\\u0435\\u0447\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430:\")), React.createElement(Form.Control, {\n      name: \"end_date1\",\n      defaultValue: \"2020-01-14\",\n      type: \"date\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430 (\\u043D\\u0430 \\u0430\\u043D\\u0433\\u043B\\u0438\\u0439\\u0441\\u043A\\u043E\\u043C):\")), React.createElement(Form.Control, {\n      name: \"city_name1\",\n      defaultValue: \"Moscow\",\n      type: \"text\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    })))), React.createElement(\"p\", {\n      className: cs.page__title_form_one_data_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, \"\\u0412\\u0442\\u043E\\u0440\\u043E\\u0439 \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A:\")), React.createElement(Form.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430:\")), React.createElement(Form.Control, {\n      name: \"start_date2\",\n      defaultValue: \"2020-01-13\",\n      type: \"date\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043D\\u0435\\u0447\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430:\")), React.createElement(Form.Control, {\n      name: \"end_date2\",\n      defaultValue: \"2020-01-14\",\n      type: \"date\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formHorizontal2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: cs.row_three_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      bsPrefix: cs.title_field,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430 (\\u043D\\u0430 \\u0430\\u043D\\u0433\\u043B\\u0438\\u0439\\u0441\\u043A\\u043E\\u043C):\")), React.createElement(Form.Control, {\n      name: \"city_name2\",\n      defaultValue: \"Moscow\",\n      type: \"text\",\n      required: \"required\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    })))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, \"\\u0412\\u043D\\u0435\\u0448\\u043D\\u0438\\u0439 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441 https://www.weatherbit.io/ \\u043E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0437\\u0430\\u043F\\u0440\\u0430\\u0448\\u0438\\u0432\\u0435\\u043C\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0441 \\u0440\\u0430\\u0437\\u043D\\u044B\\u043C \\u0438\\u043D\\u0442\\u0435\\u0440\\u0432\\u0430\\u043B\\u043E\\u043C \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438 \\u0434\\u043E \\u043E\\u0434\\u043D\\u043E\\u0433\\u043E \\u0440\\u0430\\u0437\\u0430 \\u0432 \\u0441\\u0443\\u0442\\u043A\\u0438.\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, \"\\u0421\\u043E\\u043E\\u0442\\u0432\\u0435\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u043E \\u0432 \\u0441\\u0443\\u0442\\u043A\\u0438 \\u043C\\u043E\\u0436\\u043D\\u043E \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0441 \\u0432\\u043D\\u0435\\u0448\\u043D\\u0435\\u0433\\u043E \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u043E\\u0434\\u0438\\u043D \\u0438\\u043D\\u0442\\u0435\\u0440\\u0432\\u0430\\u043B \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438 \\u0434\\u043B\\u044F \\u043B\\u044E\\u0431\\u043E\\u0433\\u043E \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430.\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, \"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u043E\\u0432 \\u043A \\u0432\\u043D\\u0435\\u0448\\u043D\\u0435\\u043C\\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0443 \\u043E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442\\u0441\\u044F \\u0434\\u043E 500 \\u0432 \\u0441\\u0443\\u0442\\u043A\\u0438.\")), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      variant: \"warning\",\n      name: \"upload\",\n      className: cs.button_upload,\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0441 \\u0432\\u043D\\u0435\\u0448\\u043D\\u0435\\u0433\\u043E \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430\")), React.createElement(Col, {\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      variant: \"danger\",\n      name: \"get\",\n      className: cs.button_upload,\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0438\\u0437 \\u043B\\u043E\\u043A\\u0430\\u043B\\u044C\\u043D\\u043E\\u0439 \\u0431\\u0430\\u0437\\u044B\")))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: cs.page__title_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }, this.renderTitle(data)), React.createElement(\"div\", {\n      className: cs.page__graph_data_wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, React.createElement(ReactEcharts, {\n      ref: \"echartsInstance\",\n      style: {\n        height: style.height_graph\n      },\n      option: this.getOption('temp'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(ReactEcharts, {\n      ref: \"echartsInstance\",\n      style: {\n        height: style.height_graph\n      },\n      option: this.getOption('pres'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(ReactEcharts, {\n      ref: \"echartsInstance\",\n      style: {\n        height: style.height_graph\n      },\n      option: this.getOption('rh'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default DrawGraphs;","map":{"version":3,"sources":["/home/andrey/my_projects/test_tasks/test_itq-group/itq_test_front/src/components/Draw_graphs.jsx"],"names":["React","Form","Button","axios","cs","fconfig","Col","Row","ReactEcharts","base_url","JSON","stringify","replace","DrawGraphs","Component","constructor","props","state","isFetching","error","data1","data2","start_date1","end_date1","city_name1","start_date2","end_date2","city_name2","style","height_graph","onChange","bind","handleClick","UpdateState","PutState","getOption","checkData","response","data","Err","Error","setState","length","event","type_data","get","params","city","city_name","start_date","end_date","headers","then","console","log","catch","e","alert","message","name","target","preventDefault","value","componentDidMount","months","title","type_unit","option","legend","elements","point","display","text","tooltip","trigger","axisPointer","type","xAxis","axisTick","alignWithLabel","axisLine","onZero","axisLabel","formatter","index","myDate","Date","fullDate","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","label","date","map","item","dt","yAxis","series","smooth","renderTitle","render","page__wrapper","page__title_wrapper","page__main_title_wrapper","page__form_data_wrapper","page__title_form_data_wrapper","page__title_form_one_data_wrapper","row_three_item","title_field","button_upload","page__graph_data_wrapper","height"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport cs from './Draw_graphs.module.css';\nimport fconfig from \"../fconfig.json\";\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport ReactEcharts from 'echarts-for-react';\n\nvar base_url = JSON.stringify(fconfig[\"api\"][\"root\"]).replace(/['\"]+/g, '')\n\n\nclass DrawGraphs extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFetching: true,\n      error: null,\n      data1 : null,\n      data2 : null,\n      start_date1 : \"2020-01-13\",\n      end_date1 : \"2020-01-14\",\n      city_name1 : \"Moscow\",\n      start_date2 : \"2020-01-13\",\n      end_date2 : \"2020-01-14\",\n      city_name2 : \"Paris\",\n      style : {\n        height_graph : \"400px\"\n      }\n    }\n\n    this.onChange = this.onChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.UpdateState = this.UpdateState.bind(this);\n    this.PutState = this.PutState.bind(this);\n    this.getOption = this.getOption.bind(this);\n  }\n  ///////////////////////\n  checkData(response) {\n\n    //если какие то ошибки (надо их выводить на экран)\n    if ('error' in response.data)\n    {\n      let Err = new Error(response.data1['error']);\n      this.setState({\n        error : Err\n      })\n      throw Err;\n    }\n\n    //если пустой датасет\n    if (response.data1 != null)\n    if (response.data1['data'].length === 0)\n    {\n      let Err = new Error(\"нет данных\");\n      this.setState({\n        error: Err\n      })\n      throw Err;\n    }\n  }\n  ///////////////////////\n  PutState(event,type_data) {\n\n    axios.get(base_url+'/data/upload',{\n      params: {\n        city : this.state.city_name,\n        start_date : this.state.start_date,\n        end_date : this.state.end_date\n      },\n      headers: {\n        // Перечисляем разрешённые методы\n        \"Access-Control-Allow-Methods\": \"GET\"\n      }\n    })\n    .then(\n      (response) => {\n        this.checkData(response);\n        console.log(response) // выводим в консоль получаемые обьекты\n        this.setState({\n          [type_data]: response.data\n        });\n      }\n    )\n    .catch(e => {\n      console.log(e)\n      this.setState({\n        error: e\n      });\n      alert(this.state.error.message)\n    }\n  )\n\n}\n\n///////////////////////\nUpdateState(event,type_data) {\n\n  axios.get(base_url+'/data/get',{\n    params: {\n      city : this.state.city_name,\n      start_date : this.state.start_date,\n      end_date : this.state.end_date\n    },\n    headers: {\n      // Перечисляем разрешённые методы\n      \"Access-Control-Allow-Methods\": \"GET\"\n    }\n  })\n  .then(\n    (response) => {\n      this.checkData(response);\n      console.log(response) // выводим в консоль получаемые обьекты\n      this.setState({\n        [type_data]: response.data\n      });\n    }\n  )\n  .catch(e => {\n    console.log(e)\n    this.setState({\n      error: e\n    });\n    alert(this.state.error.message)\n  }\n)\n\n}\n/////////////////////////////////////\n\nhandleClick(event) {\n  const name = event.target.name;\n\n\n  event.preventDefault();\n\n  if (name === \"get\")\n  {\n    this.UpdateState(event,'data1')\n    this.UpdateState(event,'data2')\n  }\n\n\n  if (name === \"upload\")\n  {\n    this.PutState(event,'data1')\n    this.PutState(event,'data2')\n  }\n\n\n}\n//////////////////////////////////////\nonChange(e) {\n  const name = e.target.name;\n  const value = e.target.value;\n\n  this.setState({\n    [name]: value\n  })\n\n}\n\n//////////////////////\ncomponentDidMount(event) {\n\n  this.UpdateState(event,'data1')\n  this.UpdateState(event,'data2')\n\n}\n\n/////////////////////\n//функция рисования графика\ngetOption(type_data) {\n\n  var months = [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Май\", \"Июнь\",\n                  \"Июль\", \"Август\", \"Сентябрь\", \"Октябрь\", \"Ноябрь\", \"Декабрь\"];\n\n  let title = \"\",type_unit = \"\";\n  if (type_data === \"temp\")\n  {\n    title = \"Температура\"\n    type_unit =\"[C]\"\n  }\n\n\n  if (type_data === \"pres\")\n  {\n    title = \"Давление\"\n    type_unit =\"[mb]\"\n  }\n\n  if (type_data === \"rh\")\n  {\n    title = \"влажность\"\n    type_unit =\"[%]\"\n  }\n\n\n  //ждем пока данные полностью загрузятся и тогда отрисовываем график\n  if (this.state.data !== null)\n  {\n\n    let option = {\n      legend: {},\n      elements: {\n        point: {\n          display: true\n        }\n      },\n      title: {text:type_unit},\n      tooltip: {\n        trigger: 'none',\n        axisPointer: {\n          type: 'cross'\n        }\n      },\n      xAxis: {\n        axisTick: {\n          alignWithLabel: true\n        },\n        axisLine: {\n          onZero: false\n        },\n        axisLabel : {\n          formatter: function (value, index) {\n            // Formatted to be month/day; display year only in the first label\n            let myDate = new Date(value);\n            let fullDate = myDate.getDate() + \" \" + months[myDate.getMonth()] + \" \" + myDate.getFullYear() + \" \" + myDate.getHours() +\":\"+myDate.getMinutes()+\":\"+myDate.getSeconds() ;\n            return fullDate;\n          }\n        },\n        axisPointer: {\n          label: {\n            formatter: function (date) {\n              let myDate = new Date(date.value);\n              let fullDate = myDate.getDate() + \" \" + months[myDate.getMonth()] + \" \" + myDate.getFullYear() + \" \" + myDate.getHours() +\":\"+myDate.getMinutes()+\":\"+myDate.getSeconds() ;\n              return fullDate;\n            }\n          }\n        },\n        data: this.state.data1['data'].map((item) => (item.dt))\n      },\n      yAxis: {},\n      series: [\n        {\n          data: this.state.data1['data'].map(function (item) {\n            return item[type_data];\n          }),\n          name: title,\n          type: 'line',\n          smooth: 0.5  //включаем сглаживание\n        },\n        {\n          data: this.state.data2['data'].map(function (item) {\n            return item[type_data];\n          }),\n          name: title,\n          type: 'line',\n          smooth: 0.5  //включаем сглаживание\n        }\n      ]\n\n\n    };\n    return option;\n  }\n  else\n  {\n    let option = {};\n    return option;\n  }\n\n}\n////////////////////\nrenderTitle(data) {\n  if (this.state.data1 !== null && this.state.data2 !== null)\n  {\n    return( <p><b>Выбранные города - {this.state.data1['data'][0]['city_name']} ({this.state.data1['data'][0]['country_code']}) и this.state.data2['data'][0]['city_name']} ({this.state.data2['data'][0]['country_code']})</b></p> );\n  }\n  else {\n    return(<p></p>);\n  }\n\n}\n\n/////////////////////\n\n\nrender() {\n  let {style,data} = this.state;\n  return (\n    <div>\n      <div className={cs.page__wrapper}>\n        <div className={`${cs.page__title_wrapper} ${cs.page__main_title_wrapper}`}>\n          <b>Погодные данные</b>\n          <hr></hr>\n        </div>\n        <div className={cs.page__form_data_wrapper}>\n          <p className={cs.page__title_form_data_wrapper}><b>Введите основные параметры:</b></p>\n          <hr></hr>\n          <p className={cs.page__title_form_one_data_wrapper}><b>Первый график:</b></p>\n          <Form>\n            <Form.Row>\n              <Form.Group  as={Col} controlId=\"formHorizontal1\">\n                <div className={cs.row_three_item}>\n                  <Form.Label bsPrefix={cs.title_field}><b>Начальная дата:</b></Form.Label>\n                  <Form.Control name=\"start_date1\" defaultValue=\"2020-01-13\" type=\"date\" required=\"required\"  onChange={this.onChange} />\n                </div>\n              </Form.Group>\n\n              <Form.Group as={Col} controlId=\"formHorizontal2\">\n                <div className={cs.row_three_item}>\n                  <Form.Label bsPrefix={cs.title_field}><b>Конечная дата:</b></Form.Label>\n                  <Form.Control name=\"end_date1\" defaultValue=\"2020-01-14\" type=\"date\" required=\"required\" onChange={this.onChange} />\n                </div>\n              </Form.Group>\n\n              <Form.Group as={Col} controlId=\"formHorizontal2\">\n                <div className={cs.row_three_item}>\n                  <Form.Label bsPrefix={cs.title_field}><b>Название города (на английском):</b></Form.Label>\n                  <Form.Control name=\"city_name1\" defaultValue=\"Moscow\" type=\"text\" required=\"required\" onChange={this.onChange} />\n                </div>\n              </Form.Group>\n            </Form.Row>\n            <p className={cs.page__title_form_one_data_wrapper}><b>Второй график:</b></p>\n            <Form.Row>\n              <Form.Group  as={Col} controlId=\"formHorizontal1\">\n                <div className={cs.row_three_item}>\n                  <Form.Label bsPrefix={cs.title_field}><b>Начальная дата:</b></Form.Label>\n                  <Form.Control name=\"start_date2\" defaultValue=\"2020-01-13\" type=\"date\" required=\"required\"  onChange={this.onChange} />\n                </div>\n              </Form.Group>\n\n              <Form.Group as={Col} controlId=\"formHorizontal2\">\n                <div className={cs.row_three_item}>\n                  <Form.Label bsPrefix={cs.title_field}><b>Конечная дата:</b></Form.Label>\n                  <Form.Control name=\"end_date2\" defaultValue=\"2020-01-14\" type=\"date\" required=\"required\" onChange={this.onChange} />\n                </div>\n              </Form.Group>\n\n              <Form.Group as={Col} controlId=\"formHorizontal2\">\n                <div className={cs.row_three_item}>\n                  <Form.Label bsPrefix={cs.title_field}><b>Название города (на английском):</b></Form.Label>\n                  <Form.Control name=\"city_name2\" defaultValue=\"Moscow\" type=\"text\" required=\"required\" onChange={this.onChange} />\n                </div>\n              </Form.Group>\n            </Form.Row>\n            <p><i>Внешний ресурс https://www.weatherbit.io/ ограничивает количество запрашивемых данных с разным интервалом времени до одного раза в сутки.</i>\n            <br></br><i>Соотвественно в сутки можно загрузить с внешнего ресурса только один интервал времени для любого города.</i>\n            <br></br><i>Максимальное количество запросов к внешнему ресурсу ограничивается до 500 в сутки.</i></p>\n            <Row>\n              <Col xs={4}>\n                <Button type=\"submit\" variant=\"warning\" name=\"upload\" className={cs.button_upload}  onClick={this.handleClick}>\n                  Загрузить данные с внешнего ресурса\n                </Button>\n              </Col>\n              <Col xs={4}>\n                <Button type=\"submit\" variant=\"danger\" name=\"get\" className={cs.button_upload}  onClick={this.handleClick}>\n                  Загрузить данные из локальной базы\n                </Button>\n              </Col>\n            </Row>\n          </Form>\n          <hr></hr>\n        </div>\n\n        <div className={cs.page__title_wrapper}>\n          {this.renderTitle(data)}\n        </div>\n        <div className={cs.page__graph_data_wrapper}>\n          <Row>\n            <Col>\n              <ReactEcharts ref='echartsInstance'\n                style={{ height: style.height_graph}}\n                option={this.getOption('temp')} />\n            </Col>\n            <Col>\n              <ReactEcharts ref='echartsInstance'\n                style={{ height: style.height_graph}}\n                option={this.getOption('pres')} />\n            </Col>\n            <Col>\n              <ReactEcharts ref='echartsInstance'\n                style={{ height: style.height_graph}}\n                option={this.getOption('rh')} />\n            </Col>\n          </Row>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n}\n\n\nexport default DrawGraphs;\n"]},"metadata":{},"sourceType":"module"}